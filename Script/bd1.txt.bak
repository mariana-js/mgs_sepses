CREATE TABLE HOSPITAL (
	ID_HOSPITAL UUID PRIMARY KEY,
	RAZAO_SOCIAL VARCHAR(50),
	NOME_FANTASIA VARCHAR(50),
	CNPJ VARCHAR(14),
	ATIVO BOOLEAN
);

CREATE TABLE PROFISSIONAL (
	IDPROFISSIONAL UUID PRIMARY KEY,
	ID_HOSPITAL UUID NOT NULL,
	NOME VARCHAR(40),
	CPF VARCHAR(11) UNIQUE,
	EMAIL VARCHAR(50) UNIQUE,
	SENHA VARCHAR(255),
	ESTADO CHAR(2),
	ADMIN BOOLEAN,
	STATUS BOOLEAN,
    	CONSTRAINT FK_ID_HOSPITAL FOREIGN KEY (ID_HOSPITAL) 
        REFERENCES HOSPITAL(ID_HOSPITAL) ON DELETE CASCADE
);

CREATE TABLE MEDICO (
    IDPROFISSIONAL UUID PRIMARY KEY,
    CRM CHAR(6) UNIQUE,
    CONSTRAINT FK_IDPROFISSIONAL FOREIGN KEY (IDPROFISSIONAL) 
        REFERENCES PROFISSIONAL(IDPROFISSIONAL) ON DELETE SET NULL
);

CREATE TABLE ENFERMEIRO (
    IDPROFISSIONAL UUID PRIMARY KEY,
    COREN CHAR(10) UNIQUE,
    CONSTRAINT FK_IDPROFISSIONAL FOREIGN KEY (IDPROFISSIONAL) 
        REFERENCES PROFISSIONAL(IDPROFISSIONAL) ON DELETE SET NULL
);

CREATE TABLE LOG (
    ID_LOG UUID PRIMARY KEY,
    IDPROFISSIONAL UUID NOT NULL,
    DESCRICAO VARCHAR(255),
	DATA DATE DEFAULT CURRENT_DATE, 
    CONSTRAINT FK_IDPROFISSIONAL FOREIGN KEY (IDPROFISSIONAL) 
        REFERENCES PROFISSIONAL(IDPROFISSIONAL) ON DELETE SET NULL
);

CREATE TABLE PACIENTE (
	ID_PACIENTE UUID PRIMARY KEY,
	NOME VARCHAR(40),
	CPF VARCHAR(11),
	DATA_NASCIMENTO DATE,
	SEXO VARCHAR(10),
    	CELULAR1 CHAR(11),
  	CELULAR2 CHAR(11),
	ATIVO BOOLEAN,
	RISCO_SEPSE VARCHAR(3),
	DATA_ALTERACAO DATE DEFAULT CURRENT_DATE
);

CREATE TABLE DADOS_CLINICOS (
	ID UUID PRIMARY KEY,
	ID_PACIENTE UUID  NOT NULL,
	IDPROFISSIONAL UUID NOT NULL,
	DATA DATE DEFAULT CURRENT_DATE,
	RELACAOP02FI02 VARCHAR(10),
	PLAQUETAS VARCHAR(10),
	DIURESE VARCHAR(10),
	CREATININA VARCHAR(10),
	GLASGOW VARCHAR(2),
	EP VARCHAR(10),
	NOREPINEFRINA VARCHAR(10),
	DOBUTAMINA VARCHAR(10),
	DOPAMINA VARCHAR(10),
	PAM VARCHAR(10),
	BILIRRUBINA VARCHAR(10),
    	CONSTRAINT FK_ID_PACIENTE FOREIGN KEY (ID_PACIENTE) 
			REFERENCES PACIENTE(ID_PACIENTE) ON DELETE CASCADE,
		CONSTRAINT FK_IDPROFISSIONAL FOREIGN KEY (IDPROFISSIONAL) 
			REFERENCES PROFISSIONAL(IDPROFISSIONAL) ON DELETE SET NULL
);
	
CREATE TABLE SITUACAO_ADVERSA (
    ID UUID PRIMARY KEY,
    ID_PACIENTE UUID NOT NULL,
	IDPROFISSIONAL UUID NOT NULL,
    SITUACAO_ADVERSA VARCHAR(50),
	DATA DATE DEFAULT CURRENT_DATE,
    CONSTRAINT FK_SITUACAO_PACIENTE FOREIGN KEY (ID_PACIENTE) 
        REFERENCES PACIENTE(ID_PACIENTE) ON DELETE CASCADE,
	CONSTRAINT FK_IDPROFISSIONAL FOREIGN KEY (IDPROFISSIONAL) 
		REFERENCES PROFISSIONAL(IDPROFISSIONAL) ON DELETE SET NULL
);

CREATE TABLE RISCO_SEPSE (
    ID UUID PRIMARY KEY,
    ID_PACIENTE UUID NOT NULL,
    RISCO VARCHAR(3),
    CONSTRAINT FK_RISCO_PACIENTE FOREIGN KEY (ID_PACIENTE) 
        REFERENCES PACIENTE(ID_PACIENTE) ON DELETE CASCADE
);