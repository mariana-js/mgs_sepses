CREATE TABLE HOSPITAL (
    ID_HOSPITAL UUID PRIMARY KEY,
    RAZAO_SOCIAL VARCHAR(50),
    NOME_FANTASIA VARCHAR(50),
    CNPJ CHAR(14) UNIQUE,
	ATIVO BOOLEAN
);

CREATE TABLE PROFISSIONAL (
    ID_PROFISSIONAL UUID PRIMARY KEY,
    ID_HOSPITAL UUID NOT NULL,
    NOME VARCHAR(40),
    CPF CHAR(11) UNIQUE,
    EMAIL VARCHAR(50) UNIQUE,
    SENHA VARCHAR(255),  -- Para armazenar hashes de senha
    ESTADO CHAR(2),
    CONSTRAINT FK_ID_HOSPITAL FOREIGN KEY (ID_HOSPITAL) 
        REFERENCES HOSPITAL(ID_HOSPITAL) ON DELETE CASCADE
);

CREATE TABLE MEDICO (
    ID_PROFISSIONAL UUID PRIMARY KEY,
    CRM CHAR(6) UNIQUE,
    CONSTRAINT FK_MEDICO_PROF FOREIGN KEY (ID_PROFISSIONAL) 
        REFERENCES PROFISSIONAL(ID_PROFISSIONAL) ON DELETE CASCADE
);

CREATE TABLE ENFERMEIRO (
    ID_PROFISSIONAL UUID PRIMARY KEY,
    COREN CHAR(10) UNIQUE,
    CONSTRAINT FK_ENFERMEIRO_PROF FOREIGN KEY (ID_PROFISSIONAL) 
        REFERENCES PROFISSIONAL(ID_PROFISSIONAL) ON DELETE CASCADE
);

CREATE TABLE LOG (
    ID_LOG UUID PRIMARY KEY,
    ID_PROFISSIONAL UUID NOT NULL,
    DESCRICAO VARCHAR(255),
	DATA DATE,
    CONSTRAINT FK_ID_PROFISSIONAL FOREIGN KEY (ID_PROFISSIONAL) 
        REFERENCES PROFISSIONAL(ID_PROFISSIONAL) ON DELETE SET NULL
);

CREATE TABLE PACIENTE (
    ID_PACIENTE UUID PRIMARY KEY,
    NOME VARCHAR(40),
    CPF CHAR(11) UNIQUE,
    DATA_NASCIMENTO DATE,
	SEXO VARCHAR(10),
    TELEFONE CHAR(11),
    ATIVO BOOLEAN DEFAULT TRUE,
    RISCO_SEPSE VARCHAR(3)
);

CREATE TABLE DADOS_CLINICOS (
    ID UUID PRIMARY KEY,
    ID_PACIENTE UUID NOT NULL,
    RELACAOP02FI02 NUMERIC(5,2),
    PLAQUETAS INTEGER,
    DIURESE NUMERIC(6,2),
    CREATININA NUMERIC(4,2),
    GLASGOW SMALLINT CHECK (GLASGOW BETWEEN 3 AND 15),
    EP VARCHAR(10),
    NOREPINEFRINA NUMERIC(5,2),
    DOBUTAMINA NUMERIC(5,2),
    DOPAMINA NUMERIC(5,2),
    PAM NUMERIC(6,2),
    BILIRRUBINA NUMERIC(4,2),
    CONSTRAINT FK_ID_PACIENTE FOREIGN KEY (ID_PACIENTE) 
        REFERENCES PACIENTE(ID_PACIENTE) ON DELETE CASCADE
);

CREATE TABLE SITUACAO_ADVERSA (
    ID UUID PRIMARY KEY,
    ID_PACIENTE UUID NOT NULL,
    SITUACAO_ADVERSA VARCHAR(50),
	DATA DATE,
    CONSTRAINT FK_SITUACAO_PACIENTE FOREIGN KEY (ID_PACIENTE) 
        REFERENCES PACIENTE(ID_PACIENTE) ON DELETE CASCADE
);

CREATE TABLE RISCO_SEPSE (
    ID UUID PRIMARY KEY,
    ID_PACIENTE UUID NOT NULL,
    RISCO VARCHAR(3),
    CONSTRAINT FK_RISCO_PACIENTE FOREIGN KEY (ID_PACIENTE) 
        REFERENCES PACIENTE(ID_PACIENTE) ON DELETE CASCADE
);
